<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindALT AI - Yapay Zeka Asistanınız</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e8ba3 100%);
            min-height: 100vh;
            display: flex;
            overflow: hidden;
            position: relative;
        }

        /* Welcome Modal */
        .welcome-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 99999;
        }

        .welcome-modal-content {
            background: white;
            border-radius: 24px;
            padding: 40px;
            max-width: 650px;
            width: 90%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.5s ease-out;
        }

        @keyframes modalSlideIn {
            from { 
                opacity: 0; 
                transform: translateY(100px) scale(0.9);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .modal-logo-container {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-logo {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(42, 82, 152, 0.3);
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .modal-text {
            font-size: 15px;
            line-height: 1.9;
            color: #333;
            margin-bottom: 18px;
            text-align: justify;
        }

        .modal-signature {
            font-size: 15px;
            color: #555;
            text-align: right;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #f0f0f0;
        }

        .modal-signature strong {
            color: #1e3c72;
            font-weight: 700;
        }

        .modal-accept-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(42, 82, 152, 0.3);
        }

        .modal-accept-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 35px rgba(42, 82, 152, 0.5);
        }

        .modal-accept-btn:active {
            transform: scale(0.98);
        }

        /* Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
            z-index: 10;
            position: relative;
            height: 100vh;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .logo {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 2s infinite;
            overflow: hidden;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(42, 82, 152, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px 10px rgba(42, 82, 152, 0); }
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .logo-text {
            font-size: 22px;
            font-weight: 700;
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .new-chat-btn {
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(42, 82, 152, 0.3);
        }

        .new-chat-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(42, 82, 152, 0.4);
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .history-item {
            padding: 12px;
            background: rgba(42, 82, 152, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            color: #333;
        }

        .history-item:hover {
            background: rgba(42, 82, 152, 0.1);
            transform: translateX(5px);
        }

        /* Main Chat Area */
        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            z-index: 10;
            position: relative;
            height: 100vh;
            overflow: hidden;
        }

        .chat-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 30px;
            border-bottom: 1px solid rgba(42, 82, 152, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .header-title {
            font-size: 20px;
            font-weight: 600;
            color: #1e3c72;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 0;
        }

        .message {
            display: flex;
            gap: 15px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .message.bot .avatar {
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            color: white;
        }

        .message.user .avatar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .message-content {
            max-width: 70%;
            padding: 16px 20px;
            border-radius: 18px;
            line-height: 1.6;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .message.bot .message-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            color: #333;
            border-bottom-left-radius: 6px;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            color: white;
            border-bottom-right-radius: 6px;
        }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 10px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #2a5298;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        /* Input Area */
        .input-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 30px;
            border-top: 1px solid rgba(42, 82, 152, 0.1);
            flex-shrink: 0;
        }

        .input-wrapper {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            gap: 12px;
            align-items: center;
            background: white;
            padding: 8px;
            border-radius: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
        }

        .input-wrapper:focus-within {
            box-shadow: 0 6px 30px rgba(42, 82, 152, 0.2);
        }

        #userInput {
            flex: 1;
            border: none;
            outline: none;
            padding: 12px 16px;
            font-size: 15px;
            background: transparent;
            color: #333;
        }

        #userInput::placeholder {
            color: #999;
        }

        .send-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 20px;
        }

        .send-btn:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 4px 15px rgba(42, 82, 152, 0.4);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(42, 82, 152, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(42, 82, 152, 0.5);
        }

        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100%;
            text-align: center;
            padding: 40px;
        }

        .welcome-logo {
            width: 120px;
            height: 120px;
            margin-bottom: 30px;
            animation: float-logo 3s ease-in-out infinite;
        }

        .welcome-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 10px 30px rgba(42, 82, 152, 0.3));
        }

        @keyframes float-logo {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .welcome-title {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(135deg, #2a5298, #1e3c72);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        .welcome-subtitle {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 40px;
        }

        .example-prompts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            max-width: 800px;
            width: 100%;
        }

        .example-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(42, 82, 152, 0.3);
        }

        .example-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .example-text {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -280px;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s;
            }

            .sidebar.active {
                left: 0;
            }

            .message-content {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Modal -->
    <div class="welcome-modal-overlay" id="welcomeModalOverlay">
        <div class="welcome-modal-content">
            <div class="modal-logo-container">
                <img src="{{ url_for('static', filename='logo.png') }}" alt="MindALT AI Logo" class="modal-logo">
            </div>
            
            <h1 class="modal-title">MindALT AI - Sürekli Gelişen Teknolojilerle Geleceğe Adım Atıyoruz!</h1>
            
            <p class="modal-text">
                MindALT AI olarak, yapay zeka teknolojilerini her geçen gün daha da geliştirmeye ve kullanıcılarımıza en son yenilikleri sunmaya kararlıyız. Şirketimiz, sürekli olarak yeni özellikler ekleyerek, kullanıcı deneyimini daha da iyileştiriyor. Geliştirme sürecinde olan özelliklerimizle, AI tabanlı çözümleri her geçen gün daha güçlü, daha kullanıcı dostu ve daha verimli hale getirmeyi hedefliyoruz.
            </p>
            
            <p class="modal-text">
                Yeni özelliklerimiz arasında, daha zengin içerik üretme araçları, özel metin ve resim promptları gibi unsurlar yer alacak. Zaman içinde, kullanıcılarımızın ihtiyaçlarına en iyi şekilde cevap verecek inovatif çözümlerimiz devreye girecek.
            </p>
            
            <p class="modal-text">
                MindALT AI'nin sunduğu bu heyecan verici gelişmelerle, yapay zeka dünyasında daha ileriye adım atıyoruz. Gelişmelerden haberdar olmak ve yeni özellikleri keşfetmek için bizi takip etmeye devam edin!
            </p>
            
            <div class="modal-signature">
                Saygılarımızla,<br>
                <strong>Muhammed Altar Çokur</strong><br>
                MindALT AI
            </div>
            
            <button class="modal-accept-btn" onclick="closeModal()">
                ✨ Tamam
            </button>
        </div>
    </div>

    <!-- Particles -->
    <div class="particles" id="particles"></div>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo-container">
            <div class="logo">
                <img src="{{ url_for('static', filename='logo.png') }}" alt="MindALT AI Logo">
            </div>
            <div class="logo-text">MindALT AI</div>
        </div>
        
        <button class="new-chat-btn" onclick="newChat()">
            ✨ Yeni Sohbet
        </button>

        <div class="chat-history">
            <div class="history-item">💬 Önceki Sohbet 1</div>
            <div class="history-item">💬 Önceki Sohbet 2</div>
            <div class="history-item">💬 Önceki Sohbet 3</div>
        </div>
    </div>

    <!-- Main Chat -->
    <div class="chat-main">
        <div class="chat-header">
            <div class="header-title">MindALT AI</div>
        </div>

        <div class="chat-container" id="chatContainer">
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-logo">
                    <img src="{{ url_for('static', filename='logo.png') }}" alt="MindALT AI">
                </div>
                <h1 class="welcome-title">MindALT AI'ya Hoş Geldiniz</h1>
                <p class="welcome-subtitle">Size nasıl yardımcı olabilirim?</p>
                
                <div class="example-prompts">
                    <div class="example-card" onclick="sendExamplePrompt('Muhammed Altar Çokur kimdir?')">
                        <div class="example-icon">👤</div>
                        <div class="example-text">Muhammed Altar Çokur kimdir?</div>
                    </div>
                    <div class="example-card" onclick="sendExamplePrompt('Scarven: Veil Within hakkında bilgi ver')">
                        <div class="example-icon">🎮</div>
                        <div class="example-text">Scarven: Veil Within nedir?</div>
                    </div>
                    <div class="example-card" onclick="sendExamplePrompt('Mindora Software ne yapar?')">
                        <div class="example-icon">💼</div>
                        <div class="example-text">Mindora Software</div>
                    </div>
                    <div class="example-card" onclick="sendExamplePrompt('MindALT AI özellikleri neler?')">
                        <div class="example-icon">✨</div>
                        <div class="example-text">Özelliklerim</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <input 
                    type="text" 
                    id="userInput" 
                    placeholder="Mesajınızı yazın..." 
                    onkeypress="if(event.key==='Enter') sendMessage()"
                >
                <button class="send-btn" onclick="sendMessage()">
                    ➤
                </button>
            </div>
        </div>
    </div>

    <script>
        // Modal Control
        function closeModal() {
            const modal = document.getElementById('welcomeModalOverlay');
            modal.style.opacity = '0';
            modal.style.transition = 'opacity 0.3s';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }

        // Particles
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                container.appendChild(particle);
            }
        }

        createParticles();

        const chatContainer = document.getElementById('chatContainer');
        const welcomeScreen = document.getElementById('welcomeScreen');
        const userInput = document.getElementById('userInput');
        let messageCount = 0;

        function forceScrollToBottom() {
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }, 0);
        }

        function addMessage(text, isUser) {
            if (messageCount === 0) {
                welcomeScreen.style.display = 'none';
            }
            messageCount++;

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'avatar';
            avatar.textContent = isUser ? '👤' : '🤖';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            chatContainer.appendChild(messageDiv);
            
            if (isUser) {
                content.textContent = text;
                forceScrollToBottom();
            } else {
                let i = 0;
                const typingInterval = setInterval(() => {
                    if (i < text.length) {
                        content.textContent += text.charAt(i);
                        i++;
                        forceScrollToBottom();
                    } else {
                        clearInterval(typingInterval);
                        forceScrollToBottom();
                    }
                }, 20);
            }
        }

        function showTypingIndicator() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message bot';
            messageDiv.id = 'typingIndicator';
            
            const avatar = document.createElement('div');
            avatar.className = 'avatar';
            avatar.textContent = '🤖';
            
            const content = document.createElement('div');
            content.className = 'message-content';
            content.innerHTML = '<div class="typing-indicator"><div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div></div>';
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(content);
            chatContainer.appendChild(messageDiv);
            forceScrollToBottom();
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

            async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            addMessage(message, true);
            userInput.value = '';
            
            showTypingIndicator();

            try {
                const response = await fetch('/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_input: message })
                });

                const data = await response.json();
                removeTypingIndicator();

                if (data.error) {
                    addMessage(`Hata: ${data.error}`, false);
                } else {
                    addMessage(data.response, false);
                }
            } catch (error) {
                removeTypingIndicator();
                addMessage(`Bağlantı hatası: ${error.message}`, false);
            }
        }

        function sendExamplePrompt(text) {
            userInput.value = text;
            sendMessage();
        }

        function newChat() {
            chatContainer.innerHTML = '';
            messageCount = 0;
            welcomeScreen.style.display = 'flex';
            chatContainer.appendChild(welcomeScreen);
        }

        userInput.focus();
    </script>
</body>
</html>